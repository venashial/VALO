<script>
	import { onMount } from 'svelte';

	// Title slide
	let current = 0;
	const start = 905;
	const end = -1800;
	const step = 1;

	// Mouse speed
	let mouseSpeed = 0;
	let prevEvent;
	let currentEvent;

	onMount(() => {
		(function loop() {
			if (current > end) {
				current -= step + (mouseSpeed ? Math.max((mouseSpeed * 1) / 80, 10) : 0);
			} else {
				current = start;
			}

			requestAnimationFrame(loop);
		})();

		document.documentElement.onmousemove = function (event) {
			currentEvent = event;
		};

		setInterval(updateMouseSpeed, 100);
	});

	function updateMouseSpeed() {
		if (prevEvent && currentEvent) {
			var movementX = Math.abs(currentEvent.screenX - prevEvent.screenX);
			var movementY = Math.abs(currentEvent.screenY - prevEvent.screenY);
			var movement = Math.sqrt(movementX * movementX + movementY * movementY);

			mouseSpeed = 10 * Math.round(movement);
		}
		prevEvent = currentEvent;
	}
</script>

<svg
	xmlns="http://www.w3.org/2000/svg"
	fill-rule="evenodd"
	stroke-linejoin="round"
	stroke-miterlimit="2"
	clip-rule="evenodd"
	viewBox="0 0 2707 2707"
	class="title-svg"
>
	<path fill="none" d="M0 0h2706.6v2706.6H0z" />
	<g transform="matrix(1 0 0 1 -89.8 1146.7)">
		<path
			fill-rule="nonzero"
			d="M985.2 270.4V124.7h-24.5v90.7L872 122l-4 .8v145.5h24.5v-92l90 94.7 2.7-.6zm549-42.7c0-18.8-8.2-30.3-36.6-42.7-17.8-7.8-24.9-13.5-24.9-23 0-9.7 7-17.9 22.1-17.9 9.8 0 21.2 5 28.8 10.2l7.9-21.5a68.1 68.1 0 00-36-10.4c-30 0-47.3 19.4-47.3 40.1 0 17.2 9 30.2 34.1 40.7 22.7 9.6 27 16 27 25.9 0 10-6.6 18.8-21.7 18.8-12.3 0-26-5.1-37.4-13.3l-8.4 22a84.5 84.5 0 0045 14c29.6 0 47.4-19.8 47.4-42.9zM435 124.7h-27.2l-40.1 95.6-40.4-95.6h-28l66.4 145.5h3.2l66.1-145.5zm1596 143.6V124.7h-24.4v143.6h24.5zm-1342.4 0v-22.4h-63v-39.7h57v-21.6h-57V147h63v-22.3H601v143.6h87.5zm1898.4 0v-22.4h-63V124.7h-24.6v143.6h87.6zm-763.5 0V124.7H1799v60h-66v-60h-24.4v143.6h24.4v-61.7h66v61.7h24.5zm-536.7 0l-66-145.5h-3.5L1151 268.3h25.3l13.9-33h56.8l13.9 33h25.8zm1046.8 0l-66-145.5h-3.5l-66.2 145.5h25.3l13.9-33h56.7l14 33h25.8zM1238.9 216h-40.7l20.4-48 20.3 48zm1046.8 0H2245l20.3-48 20.4 48z"
		/>
		<clipPath id="title_a">
			<path
				d="M985.2 270.4V124.7h-24.5v90.7L872 122l-4 .8v145.5h24.5v-92l90 94.7 2.7-.6zm549-42.7c0-18.8-8.2-30.3-36.6-42.7-17.8-7.8-24.9-13.5-24.9-23 0-9.7 7-17.9 22.1-17.9 9.8 0 21.2 5 28.8 10.2l7.9-21.5a68.1 68.1 0 00-36-10.4c-30 0-47.3 19.4-47.3 40.1 0 17.2 9 30.2 34.1 40.7 22.7 9.6 27 16 27 25.9 0 10-6.6 18.8-21.7 18.8-12.3 0-26-5.1-37.4-13.3l-8.4 22a84.5 84.5 0 0045 14c29.6 0 47.4-19.8 47.4-42.9zM435 124.7h-27.2l-40.1 95.6-40.4-95.6h-28l66.4 145.5h3.2l66.1-145.5zm1596 143.6V124.7h-24.4v143.6h24.5zm-1342.4 0v-22.4h-63v-39.7h57v-21.6h-57V147h63v-22.3H601v143.6h87.5zm1898.4 0v-22.4h-63V124.7h-24.6v143.6h87.6zm-763.5 0V124.7H1799v60h-66v-60h-24.4v143.6h24.4v-61.7h66v61.7h24.5zm-536.7 0l-66-145.5h-3.5L1151 268.3h25.3l13.9-33h56.8l13.9 33h25.8zm1046.8 0l-66-145.5h-3.5l-66.2 145.5h25.3l13.9-33h56.7l14 33h25.8zM1238.9 216h-40.7l20.4-48 20.3 48zm1046.8 0H2245l20.3-48 20.4 48z"
				clip-rule="nonzero"
			/>
		</clipPath>
		<g clip-path="url(#title_a)">
			<g transform="translate(3635.7 {180 + current}) scale(2.05606)">
				<path fill="#fff" d="M-1724.6-470.2h1316.4V846.2h-1316.4z" />
				<path fill="#fff" d="M-1724.61-558.731h1316.37v1704.43h-1316.37z" />
				<clipPath id="b">
					<path d="M-1724.61-558.731h1316.37v1704.43h-1316.37z" />
				</clipPath>
				<g clip-path="url(#b)">
					<path
						fill="#ff0039"
						d="M-409.88 828.803s-123.064 122.865-329.095 122.865c-206.031 0-329.095-122.865-329.095-122.865s-123.06-122.866-329.089-122.866c-206.028 0-329.093 122.866-329.093 122.866v221.308s123.065-122.865 329.093-122.865c206.03 0 329.089 122.865 329.089 122.865s123.064 122.865 329.095 122.865c206.03 0 329.095-122.865 329.095-122.865V828.803z"
					/>
					<path
						fill="#bb0aaf"
						d="M-1726.252 828.8s123.065-122.865 329.093-122.865c206.03 0 329.089 122.865 329.089 122.865s123.064 122.865 329.095 122.865c206.03 0 329.095-122.865 329.095-122.865V611.34s-123.064 122.864-329.095 122.864c-206.031 0-329.095-122.865-329.095-122.865s-123.06-122.866-329.089-122.866c-206.028 0-329.093 122.866-329.093 122.866V828.8z"
					/>
					<path
						fill="#3359c6"
						d="M-1726.252 611.338s123.065-122.865 329.093-122.865c206.03 0 329.089 122.865 329.089 122.865s123.064 122.865 329.095 122.865c206.03 0 329.095-122.865 329.095-122.865V394.181s-123.064 122.865-329.095 122.865c-206.031 0-329.095-122.865-329.095-122.865s-123.06-122.866-329.089-122.866c-206.028 0-329.093 122.866-329.093 122.866v217.157z"
					/>
					<path
						fill="#347e3b"
						d="M-1726.252 394.181s123.065-122.865 329.093-122.865c206.03 0 329.089 122.865 329.089 122.865s123.064 122.865 329.095 122.865c206.03 0 329.095-122.865 329.095-122.865V169.945S-532.944 292.81-738.975 292.81c-206.031 0-329.095-122.865-329.095-122.865S-1191.13 47.08-1397.16 47.08c-206.028 0-329.093 122.866-329.093 122.866v224.236z"
					/>
					<path
						fill="#ff9a0a"
						d="M-1726.252-40.616s123.065-122.866 329.093-122.866c206.03 0 329.089 122.866 329.089 122.866S-945.006 82.25-738.975 82.25c206.03 0 329.095-122.865 329.095-122.865v210.561S-532.944 292.81-738.975 292.81c-206.031 0-329.095-122.865-329.095-122.865S-1191.13 47.08-1397.16 47.08c-206.028 0-329.093 122.866-329.093 122.866v-210.56z"
					/>
					<path
						fill="#ff670c"
						d="M-1726.252-263.048s123.065-122.865 329.093-122.865c206.03 0 329.089 122.865 329.089 122.865s123.064 122.865 329.095 122.865c206.03 0 329.095-122.865 329.095-122.865v222.432S-532.944 82.25-738.975 82.25c-206.031 0-329.095-122.865-329.095-122.865s-123.06-122.866-329.089-122.866c-206.028 0-329.093 122.866-329.093 122.866v-222.432z"
					/>
					<path
						fill="#ff0039"
						d="M-1726.252-488.35s123.065-122.864 329.093-122.864c206.03 0 329.089 122.865 329.089 122.865s123.064 122.865 329.095 122.865c206.03 0 329.095-122.865 329.095-122.865v225.302s-123.064 122.865-329.095 122.865c-206.031 0-329.095-122.865-329.095-122.865s-123.06-122.866-329.089-122.866c-206.028 0-329.093 122.866-329.093 122.866V-488.35z"
					/>
					<path
						fill="#bb0aaf"
						d="M-1726.252-701.24s123.065-122.866 329.093-122.866c206.03 0 329.089 122.865 329.089 122.865s123.064 122.865 329.095 122.865c206.03 0 329.095-122.865 329.095-122.865v212.892s-123.064 122.865-329.095 122.865c-206.031 0-329.095-122.865-329.095-122.865s-123.06-109.013-329.089-109.013v.001c-206.028 0-329.093 109.012-329.093 109.012V-701.24z"
					/>
				</g>
			</g>
		</g>
	</g>
</svg>

<style lang="scss">
	svg.title-svg {
		position: absolute !important;
		margin-left: auto !important;
		margin-right: auto !important;
		top: 0 !important;
		right: 0 !important;
		left: 0 !important;
		width: 100% !important;
		height: unset !important;
		max-width: 1028px !important;
		transform: translateY(-40%) !important;

		@media (orientation: portrait) {
			transform: translateY(-32%) !important;
		}
	}
</style>
